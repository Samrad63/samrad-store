<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>ثبت نام</title>
    <link rel="stylesheet" href="css/register.css">
</head>
<body>
    <form id="registerForm">
        <h2>فرم ثبت نام</h2>

        <div>
            <label>نام: </label>
            <input type="text" name="firstname" required>
        </div>

        <div>
            <label>نام خانوادگی: </label>
            <input type="text" name="lastname" required>
        </div>

        <div>
            <label>ایمیل: </label>
            <input type="email" name="email" required>
        </div>

        <div>
            <label>رمز عبور: </label>
            <input type="password" name="password" required>
        </div>

        <button type="submit">ثبت نام</button>

        <p>قبلاً ثبت‌نام کرده‌اید؟ <a href="login.html">ورود</a></p>
    </form>

    <script>
    document.getElementById("registerForm").addEventListener("submit", async function(event) {
        event.preventDefault();

        const form = event.target;

        const formData = new URLSearchParams();
        formData.append("firstname", form.firstname.value);
        formData.append("lastname", form.lastname.value);
        formData.append("email", form.email.value);
        formData.append("password", form.password.value);
        formData.append("action", "register");

        try {
            const response = await fetch("/UserServlet", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                body: formData.toString()
            });

            const result = await response.json();
            alert(result.message || "ثبت‌نام با موفقیت انجام شد");

        } catch (error) {
            console.error("Error:", error);
            alert("خطا در ارتباط با سرور");
        }
    });
    </script>
</body>
</html>
